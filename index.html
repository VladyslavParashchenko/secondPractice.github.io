<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Task 1</title>

        <link rel="stylesheet" href="bootstrap.min.css">
        <link rel='stylesheet' href="style.css">    
</head>
<body>
<ol class="tasks">
    <li>

<h4>
При нажатии на кнопку, добавлять в <code>div</code> с идентификатором <code>container</code> фрагмент разметки в выбраную позицию.
В заголовок писать порядковый номер вставляемого элемента
</h4>
<pre>
 &lt;div class="item"&gt; 
 &lt;h4&gt;Заголовок #&lt;/h4&gt;
 &lt;p&gt;текст текст текст&lt;/p&gt;
 &lt;/div&gt;
</pre>
<br />

<select class="form-control">
    <option value="top">Добавить в начало</option>
    <option value="middle">Добавить в середину</option>
    <option value="bottom">Добавить в конец</option>
</select>
<button class="button btn btn-success btn-for-add-element">Нажать</button>
<div id="container"></div>

<script>
    var button = document.querySelector('.btn-for-add-element');
    button.addEventListener('click', addContent);
    var count = 1;
    function addContent() {
        var divElement = document.createElement('div');
        var container = document.querySelector("div#container");
        switch(document.querySelector('.form-control').value){
            case "top":
                container.insertBefore(divElement,container.firstChild);
                break;
            case "bottom":
                container.appendChild(divElement);
                break;
            case "middle":
                var count2 = container.childNodes.length;
                count2 = count2 % 2==0 ? (count2/2) : (count2+1)/2;
                container.insertBefore(divElement,container.childNodes[count2]);
                break;

        }
        console.log();
        divElement.innerHTML ='<div class="item"> <h4>Заголовок '+count+'</h4><p>текст текст текст</p></div>';
        count++;

    }
</script>

    </li>
    <li style="height: 220px">

<h4>При нажатии на ссылку, равномерно перемещать HTML-элемент с классом <code>play</code> вправо, при повторном нажатии - перемещать влево.</h4>
<br />


<a href="#" class="button btn btn-success btn-for-move-circle" onclick="return false;">Поехали!</a>
<div class="play"></div>

<script>
var isCircleMove = false;
var interval;
document.querySelector('.btn-for-move-circle').addEventListener('click',moveCircle);
function moveCircle(){
    var circle = document.querySelector('.play');
    clearInterval(interval);
    if(isCircleMove){
        interval = getInterval(-1,function () {
            isCircleMove = false;return parseInt(circle.offsetLeft)<0;},circle);

    }else{
        interval = getInterval(1, function (){
            var circleWidth = parseInt(getComputedStyle(circle).width);
            isCircleMove = true;
            return document.documentElement.clientWidth-circleWidth<(parseInt(circle.offsetLeft)+circleWidth);
        },circle);
    }

}
function getInterval (side,compare,circle){
    return setInterval(function (){
        if(compare()){
            clearInterval(interval);
        }else{
            circle.style.left =(parseInt(circle.offsetLeft)+side)+'px';
        }
    },5);
}
</script>

    </li>
    <li>
<h4>При нажатии на кнопку выдавать bootstrap-alert соответствующего типа c текстом из поля ввода.
HTML код всплывающих элементов можно посмотреть по <a href="https://www.w3schools.com/bootstrap/bootstrap_alerts.asp">ссылке</a>.
Alert должен плавно появляться в верхнем правом углу, при нажатии на крестик - исчезать. Так же alert'ы должны закрываться автоматичесски через 10 секунд.
Если несколько раз подряд нажать на кнопку - то сообщения выстраиваются один под другим.
</h4>
<br />


<input type="text" class="form-control text-for-message">

<button class="button btn btn-success btn-for-add-message">Success</button>
<button class="button btn btn-info btn-for-add-message">Info</button>
<button class="button btn btn-warning btn-for-add-message">Warning</button>
<button class="button btn btn-danger btn-for-add-message">Danger</button>


<script>
    function Messages(){
        var top=10;
        var count=0;
        var marginBetweenMessage =10;
        var messages=[];
        this.addMessage = function(type,text){
            var alertMessage = document.createElement('div');
            alertMessage.className = type;
            var b ='<a href="#" class="close m'+count+'" onclick="removeMessage(this)" title="close">&times;</a><strong></strong><p class="message-text">'+text+'</p>';
            alertMessage.innerHTML = b;
            alertMessage.style.top=top+'px';
            document.body.appendChild(alertMessage);
            var obj={
                htmlElement:alertMessage,
                height:alertMessage.offsetHeight
            };
            messages.push(obj);
            deleteAfterTime(count,this);
            count++;
            top+=alertMessage.offsetHeight+marginBetweenMessage;
        };
        this.removeMessages = function (index){
            document.body.removeChild(messages[index].htmlElement);
            top-=messages[index].height+marginBetweenMessage;
            for(var i = index+1; i < messages.length; i++) {
                var preventTop = parseInt(messages[i].htmlElement.style.top);
                messages[i].htmlElement.style.top = (preventTop - messages[index].height - marginBetweenMessage) + 'px';
                //messages[i-1]=messages[i];
            }
            //messages.pop();
            //count--;


        }
        var deleteAfterTime = function (index,context){
            setTimeout(function (){
                try{
                    context.removeMessages(index);
                }catch(e){
                    console.log(e.message);
                }
            },10000);
        }
    }
    var messageController = new Messages();
    var buttons = document.querySelectorAll('button.btn-for-add-message');
    for (var i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener('click',function  () {
            var type = 'alert alert-'+this.innerHTML.toLowerCase();
            var text = document.querySelector('.text-for-message').value;
            messageController.addMessage(type,text);
        });
    }
    function removeMessage(element){
        var messageNumber = element.className.split(' ').pop();
        messageNumber = messageNumber.substr(1);
        messageController.removeMessages(+messageNumber);

    }
</script>
    </li>
    <li>
<h4><b class="h2 text-danger">*</b>
Сделать кнопочку <i class="text-info">scroll to top</i>, она должна появляться когда пользователь проскролил страницу на размер одного видимого экрана.
Кнопочку нужно аккуратно стилизовать.
</h4>
        <button class="btn btn-success scroll-page" style="left: 1151px;" onclick="scrollPage()">↑</button>
<br />
<script>
    var scrolled;
    var intervalForScroll;
    var buttonUp = document.querySelector('.scroll-page');
    window.onscroll = function () {
         scrolled = window.pageYOffset || document.documentElement.scrollTop;
        if(scrolled>=window.innerHeight){
            buttonUp.style.display='block';
        }else{
            buttonUp.style.display='none';
        }
    }
    function scrollPage () {
        clearInterval(intervalForScroll);
        intervalForScroll = setInterval( function () {
        scrolled = window.pageYOffset || document.documentElement.scrollTop;
            if(scrolled <= 0){
                clearInterval(intervalForScroll);   
                console.log('clear');
            }else{
                window.scrollBy(0,-5);
                console.log(scrolled);
            }
        },20);
    }
</script>
    </li>
    <li class='task-5'>
<h4><b class="h2 text-danger">**</b>
Реализовать перемещение элементов внутри контейнера. Элементы нельзя ставить ближе <i class="text-info">10px</i> к границе контейнера.
Во время перемещения элемента ему должен присваиваться класс <code>move</code>. Перетаскивание эелементов должно так де работать и на мобильных устройствах.</h4>
<br />

<div class="panel box">
<div class="dragable red" style="left: 250px;top: 28px;"></div>
<div class="dragable green" style="left: 50px;top: 68px;"></div>
<div class="dragable blue" style="left: 350px;top: 287px;"></div>
<div class="dragable purple move" style="left: 70px;top: 28px;"></div>
</div>

<script>
    /*window.onload = function (){
        var draggableElements = document.querySelectorAll('.dragable');
        for(var i = 0; i < draggableElements.length; i++ ){
            draggableElements[i].addEventListener('mousedown',mouseDownEvent);
            draggableElements[i].addEventListener('mousemove',mouseMoveEvent);
            draggableElements[i].addEventListener('mouseup',mouseUpEvent);
        }
    }
    var defaultX,defaultY;
    var dragableElement;
    var isMove=false;
    function mouseDownEvent() {
        defaultX = parseInt(this.style.left);
        defaultY = parseInt(this.style.top);
        dragableElement = this;
        this.className +=' move';
        isMove = true;
    }  
    function mouseMoveEvent() {
        if(isMove){
        console.log('move');
        var x=defaultX - event.clientX;
        this.style.left=defaultX+x+'px';
        defaultX = parseInt(this.style.left);
        console.log(x);
        this.style.top=defaultY+'px';
            isMove=false;
        }
    }
    function mouseUpEvent(e) {
        dragableElement=null;
    }*/
</script>
    </li>
</ol>
<br><br><br>
<!--
<div class="alert alert-success" style="top: 10px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Success!</strong> Indicates a successful or positive action.
</div>

<div class="alert alert-info" style="top: 70px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Info!</strong> Indicates a neutral informative change or action. With long long text
</div>

<div class="alert alert-warning" style="top: 150px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Warning!</strong> Indicates a warning that might need attention.
</div>

<div class="alert alert-danger" style="top: 210px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Danger!</strong> Indicates a dangerous or potentially negative action.
</div>
-->
</body>
</html>




