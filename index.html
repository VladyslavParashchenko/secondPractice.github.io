<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Task 1</title>

        <link rel="stylesheet" href="bootstrap.min.css">
        <link rel='stylesheet' href="style.css">    
</head>
<body>
<ol class="tasks">
    <li>

<h4>
При нажатии на кнопку, добавлять в <code>div</code> с идентификатором <code>container</code> фрагмент разметки в выбраную позицию.
В заголовок писать порядковый номер вставляемого элемента
</h4>
<pre>
 &lt;div class="item"&gt; 
 &lt;h4&gt;Заголовок #&lt;/h4&gt;
 &lt;p&gt;текст текст текст&lt;/p&gt;
 &lt;/div&gt;
</pre>
<br />

<select class="form-control">
    <option>Добавить в начало</option>
    <option>Добавить в середину</option>
    <option>Добавить в конец</option>
</select>
<button class="button btn btn-success btn-for-add-element">Нажать</button>
<div id="container"></div>

<script>
    var button = document.querySelector('.btn-for-add-element');
    button.addEventListener('click', addContent);
    var count = 1;
    function addContent() {
        var divElement = document.createElement('div');
        var container = document.querySelector("div#container")
        switch(document.querySelector('.form-control').value){
            case "Добавить в начало":
                      container.insertBefore(divElement,container.firstChild);
                break;
            case "Добавить в конец":
                    container.insertBefore(divElement,null);
                break;
            case "Добавить в середину":
                    var count2 = container.childNodes.length;
                 var count2 = count2 % 2==0 ? (count2/2) : (count2+1)/2;
                container.insertBefore(divElement,container.childNodes[count2]);
                break;

        }
        console.log();
        divElement.innerHTML ='<div class="item"> <h4>Заголовок '+count+'</h4><p>текст текст текст</p></div>';
        count++;

    }
</script>

    </li>
    <li style="height: 220px">

<h4>При нажатии на ссылку, равномерно перемещать HTML-элемент с классом <code>play</code> вправо, при повторном нажатии - перемещать влево.</h4>
<br />


<a href="#" class="button btn btn-success btn-for-move-circle">Поехали!</a>
<div class="play"></div>

<script>
 var left = 0;
var isCircleMove = false;
var interval;
document.querySelector('.btn-for-move-circle').addEventListener('click',moveCircle);
function moveCircle(){
    var circle = document.querySelector('.play');
    if(isCircleMove){
        clearInterval(interval);
        isCircleMove = false;
        interval = setInterval(function (){
        if(left<0){
          clearInterval(interval);
        }else{
            circle.style.left =left+'px';
            left-=10;
            var circleWidth = parseInt(getComputedStyle(circle).width);
        }
    },50); 
    }else{
        clearInterval(interval);
       interval = setInterval(function (){
        isCircleMove = true;
        var circleWidth = parseInt(getComputedStyle(circle).width);
        left+=10;
        if(document.documentElement.clientWidth-circleWidth<(left+circleWidth)){
          clearInterval(interval);
        }else{
            circle.style.left =left+'px';
        }
        //console.log(left);
    },50); 
    }
}
</script>

    </li>
    <li>
<h4>При нажатии на кнопку выдавать bootstrap-alert соответствующего типа c текстом из поля ввода.
HTML код всплывающих элементов можно посмотреть по <a href="https://www.w3schools.com/bootstrap/bootstrap_alerts.asp">ссылке</a>.
Alert должен плавно появляться в верхнем правом углу, при нажатии на крестик - исчезать. Так же alert'ы должны закрываться автоматичесски через 10 секунд.
Если несколько раз подряд нажать на кнопку - то сообщения выстраиваются один под другим.
</h4>
<br />


<input type="text" class="form-control">

<button class="button btn btn-success btn-for-add-message">Success</button>
<button class="button btn btn-info btn-for-add-message">Info</button>
<button class="button btn btn-warning btn-for-add-message">Warning</button>
<button class="button btn btn-danger btn-for-add-message">Danger</button>


<script>
    var top1=10;
    
    var buttons = document.querySelectorAll('button.btn-for-add-message');
    for (var i = 0; i < buttons.length; i++) {
      buttons[i].addEventListener('click',function  () {
           var alertMessage = document.createElement('div');
          var text = this.innerHTML;
          alertMessage.className = 'alert '+ this.className.split(' ')[2].replace('btn','alert');
          var b ='<a href="#" class="close" onclick="removeMessage(this)" title="close">&times;</a><strong>'+text+'</strong> '+document.querySelector('input.form-control').value;
          alertMessage.innerHTML = b;
          alertMessage.style.top=top1+'px';
          top1+=60;
          deleteAfterTime(alertMessage);
          document.body.appendChild(alertMessage);
      });
      function removeMessage (el) {
            document.body.removeChild(el.parentElement);
            top1-=60;
      }
    function deleteAfterTime (element){
        setTimeout(function (){
            try{
                document.body.removeChild(element); 
            }catch(e){
                console.log(e.message);
            }
            top1-=60;
        },10000);
    }
    }
</script>
    </li>
    <li>
<h4><b class="h2 text-danger">*</b>
Сделать кнопочку <i class="text-info">scroll to top</i>, она должна появляться когда пользователь проскролил страницу на размер одного видимого экрана.
Кнопочку нужно аккуратно стилизовать.
</h4>
<br />
<script>
    var scrolled;
    var intervalForScroll;
    var isButtonAdd=false;
    window.onscroll = function () {
        
         scrolled = window.pageYOffset || document.documentElement.scrollTop;;
        if(scrolled>document.documentElement.clientHeight/2){
            if(!isButtonAdd){
            var buttonUp = document.createElement('button');
            buttonUp.className = 'btn btn-success scroll-page';
            buttonUp.innerHTML = '↑';
            buttonUp.style.left = document.documentElement.clientWidth -200+'px';
            var  tasks = document.querySelector('.tasks');
            tasks.insertBefore(buttonUp,document.querySelector('.task-5'));
            isButtonAdd = true;
            buttonUp.onclick = scrollPage;
        }
        }else{
            if(isButtonAdd){
                var tasks = document.querySelector('.tasks');
                tasks.removeChild(document.querySelector('.scroll-page'));
                isButtonAdd = false;
            }
        }
        
    }
    function scrollPage () {
        clearInterval(intervalForScroll);
        intervalForScroll = setInterval( function () {
        scrolled = window.pageYOffset || document.documentElement.scrollTop;
            if(scrolled <= 0){
                clearInterval(intervalForScroll);   
                console.log('clear');
            }else{
                window.scrollBy(0,-5);
                console.log(scrolled);
            }
        },20);
    }
</script>
    </li>
    <li class='task-5'>
<h4><b class="h2 text-danger">**</b>
Реализовать перемещение элементов внутри контейнера. Элементы нельзя ставить ближе <i class="text-info">10px</i> к границе контейнера.
Во время перемещения элемента ему должен присваиваться класс <code>move</code>. Перетаскивание эелементов должно так де работать и на мобильных устройствах.</h4>
<br />

<div class="panel box">
<div class="dragable red" style="left: 250px;top: 28px;"></div>
<div class="dragable green" style="left: 50px;top: 68px;"></div>
<div class="dragable blue" style="left: 350px;top: 287px;"></div>
<div class="dragable purple move" style="left: 70px;top: 28px;"></div>
</div>

<script>
    /*window.onload = function (){
        var draggableElements = document.querySelectorAll('.dragable');
        for(var i = 0; i < draggableElements.length; i++ ){
            draggableElements[i].addEventListener('mousedown',mouseDownEvent);
            draggableElements[i].addEventListener('mousemove',mouseMoveEvent);
            draggableElements[i].addEventListener('mouseup',mouseUpEvent);
        }
    }
    var defaultX,defaultY;
    var dragableElement;
    var isMove=false;
    function mouseDownEvent() {
        defaultX = parseInt(this.style.left);
        defaultY = parseInt(this.style.top);
        dragableElement = this;
        this.className +=' move';
        isMove = true;
    }  
    function mouseMoveEvent() {
        if(isMove){
        console.log('move');
        var x=defaultX - event.clientX;
        this.style.left=defaultX+x+'px';
        defaultX = parseInt(this.style.left);
        console.log(x);
        this.style.top=defaultY+'px';
            isMove=false;
        }
    }
    function mouseUpEvent(e) {
        dragableElement=null;
    }*/
</script>
    </li>
</ol>
<br><br><br>
<!--
<div class="alert alert-success" style="top: 10px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Success!</strong> Indicates a successful or positive action.
</div>

<div class="alert alert-info" style="top: 70px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Info!</strong> Indicates a neutral informative change or action. With long long text
</div>

<div class="alert alert-warning" style="top: 150px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Warning!</strong> Indicates a warning that might need attention.
</div>

<div class="alert alert-danger" style="top: 210px">
  <a href="#" class="close" title="close">&times;</a>
  <strong>Danger!</strong> Indicates a dangerous or potentially negative action.
</div>
-->
</body>
</html>




